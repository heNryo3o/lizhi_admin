(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a04af524"],{"31a4":function(e,t,a){},"8bd6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:10}},[a("el-col",{attrs:{sm:4}},[a("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"输入资讯名称搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),a("el-col",{attrs:{sm:3}},[a("el-select",{attrs:{placeholder:"状态",size:"small",clearable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1),e._v(" "),a("el-col",{attrs:{sm:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"-","start-placeholder":"发布开始日期","end-placeholder":"发布结束日期","value-format":"yyyy-MM-dd",format:"yyyy年 MM月 dd日"},model:{value:e.listQuery.date_range,callback:function(t){e.$set(e.listQuery,"date_range",t)},expression:"listQuery.date_range"}})],1),e._v(" "),a("el-col",{attrs:{sm:8}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleFilter}},[e._v("\n        搜索\n      ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",size:"small"},on:{click:e.handleCreate}},[e._v("\n        添加资讯\n      ")])],1)],1),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"font-size":"14px"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",size:"mini"}},[a("el-table-column",{attrs:{label:"资讯名称",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleViewnews(n)}}},[e._v(e._s(n.name))]),e._v(" "),1==n.is_recommen?a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("推荐")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.category_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.created_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tag",{attrs:{type:1==n.status?"":"danger",size:"small"}},[a("span",[e._v(e._s(1==n.status?"上架中":"已下架"))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"260","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleViewnews(n)}}},[e._v("\n            编辑\n          ")]),e._v(" "),1==n.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleChangeStatus(n,2)}}},[e._v("\n            下架\n          ")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleChangeStatus(n,1)}}},[e._v("\n            上架\n          ")]),e._v(" "),1==n.is_recommen?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleChangeRecommen(n,2)}}},[e._v("\n            取消推荐\n          ")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleChangeRecommen(n,1)}}},[e._v("\n            设为推荐\n          ")])]}}])})],1)],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),a("news-info",{attrs:{"news-info":e.newsInfo,"info-visible":e.newsVisible},on:{"update:infoVisible":function(t){e.newsVisible=t},"update:info-visible":function(t){e.newsVisible=t},updateList:function(t){return e.getList()}}})],1)},i=[],s=a("b775"),o="/news";function l(e){return Object(s["a"])({url:o+"/index",method:"get",params:e})}function r(e){return Object(s["a"])({url:o+"/edit",method:"post",data:e})}function c(e){return Object(s["a"])({url:o+"/create",method:"post",data:e})}function u(e){return Object(s["a"])({url:o+"/change-status",method:"post",data:e})}function d(e){return Object(s["a"])({url:o+"/set-recommen",method:"post",data:e})}var f=a("6724"),m=a("333d"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-drawer",{attrs:{title:"新闻信息",size:"75%",visible:e.infoVisible,wrnewserClosable:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.infoVisible=t},open:e.handleOpen}},[a("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden",width:"94%",margin:"auto"}},[a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.info}},[a("div",{staticClass:"edit-container"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"name"}},[a("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:e.info.name,callback:function(t){e.$set(e.info,"name",t)},expression:"info.name"}},[e._v("\n                  新闻名称\n                ")])],1),e._v(" "),a("div",{staticStyle:{"font-size":"17px","font-weight":"600","margin-bottom":"10px"}},[e._v("新闻描述：")]),e._v(" "),a("el-form-item",{attrs:{prop:"content"}},[e.freshEditor?a("Tinymce",{ref:"editor",attrs:{height:480},model:{value:e.info.content,callback:function(t){e.$set(e.info,"content",t)},expression:"info.content"}}):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("新闻设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"分类：",prop:"category"}},[a("el-cascader",{staticClass:"full-width",staticStyle:{width:"230px"},attrs:{options:e.cateOptions,placeholder:"请选择分类"},model:{value:e.info.category,callback:function(t){e.$set(e.info,"category",t)},expression:"info.category"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面图：",prop:"thumb"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.beforeUpload},model:{value:e.info.thumb,callback:function(t){e.$set(e.info,"thumb",t)},expression:"info.thumb"}},[e.info.thumb?a("img",{staticClass:"avatar",attrs:{src:e.info.thumb}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"seo标题：",prop:"seo_title"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo标题"},model:{value:e.info.seo_title,callback:function(t){e.$set(e.info,"seo_title",t)},expression:"info.seo_title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"seo关键词：",prop:"seo_keywords"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo关键词"},model:{value:e.info.seo_keywords,callback:function(t){e.$set(e.info,"seo_keywords",t)},expression:"info.seo_keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"seo描述：",prop:"seo_describe"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo描述"},model:{value:e.info.seo_describe,callback:function(t){e.$set(e.info,"seo_describe",t)},expression:"info.seo_describe"}})],1)],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:10}},[a("el-col",{staticClass:"button-group",attrs:{sm:24}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",type:"primary",icon:"el-icon-check"},on:{click:e.handleEdit}},[e._v("\n                保存\n              ")])],1)],1)],1)])],1)])],1)},h=[],v=a("1aba"),w=a("8256"),b=a("c405"),y={name:"ProductInfo",components:{MDinput:v["a"],Tinymce:w["a"]},directives:{waves:f["a"]},props:["infoVisible","newsInfo"],data:function(){return{info:{id:0,name:"",content:""},uploadUrl:"https://www.5aizhuanqian.com/admin/system/upload",previewVisible:!1,previewImageUrl:"",dialogImageUrl:"",dialogVisible:!1,freshEditor:!1,loading:!1,loaded:!1,cateOptions:[],isOnline:0}},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleUploadSuccess:function(e){this.info.thumb=e.data.preview_url},handleUploadCodeSuccess:function(e){this.info.code=e.data.preview_url},beforeUpload:function(){},handlePreview:function(e){this.previewImageUrl=e,this.previewVisible=!0},getCateOptions:function(){var e=this;Object(b["f"])().then(function(t){console.log(t.data),e.cateOptions=t.data.options})},handleClose:function(){this.freshEditor=!1,this.$emit("update:infoVisible",!1)},handleOpen:function(){this.getCateOptions(),this.info=this.newsInfo,this.freshEditor=!0},handleEdit:function(){var e=this;this.info.id>0?r(this.info).then(function(t){e.$emit("updateList"),e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.handleClose()}):c(this.info).then(function(t){e.$emit("updateList"),e.$notify({title:"成功",message:"发布成功",type:"success",duration:2e3}),e.handleClose()})},handleUploaded:function(e){this.info.thumb=e}}},g=y,_=(a("8e47"),a("2877")),k=Object(_["a"])(g,p,h,!1,null,null,null),x=k.exports,C={components:{Pagination:m["a"],NewsInfo:x},directives:{waves:f["a"]},data:function(){return{newsInfo:{},newsVisible:!1,statusOptions:[{name:"上架中",key:1},{name:"已下架",key:2}],list:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,sort:"-id"}}},created:function(){this.getList()},methods:{handleChangeRecommen:function(e,t){var a=this,n=1===t?"设置推荐成功":"取消推荐成功";d({id:e.id,status:t}).then(function(e){a.$notify({title:"成功",message:n,type:"success",duration:2e3}),a.getList()})},getList:function(){var e=this;this.listLoading=!0,l(this.listQuery).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleCreate:function(){this.newsInfo={},this.newsVisible=!0},handleFilter:function(){this.listQuery.page=1,this.getList()},handleViewnews:function(e){this.newsInfo=e,this.newsVisible=!0},handleChangeStatus:function(e,t){var a=this,n=1===t?"资讯上架成功":"资讯下架成功";u({id:e.id,status:t}).then(function(e){a.$notify({title:"成功",message:n,type:"success",duration:2e3}),a.getList()})}}},S=C,$=Object(_["a"])(S,n,i,!1,null,null,null);t["default"]=$.exports},"8e47":function(e,t,a){"use strict";var n=a("31a4"),i=a.n(n);i.a}}]);