(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-698d092c"],{"35c9":function(e,t,a){"use strict";var i=a("57a4"),n=a.n(i);n.a},"57a4":function(e,t,a){},fb31:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{staticClass:"filter-container",attrs:{gutter:10}},[a("el-col",{attrs:{sm:4}},[a("el-input",{attrs:{size:"small","prefix-icon":"el-icon-search",placeholder:"输入应用名称搜索",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}})],1),e._v(" "),a("el-col",{attrs:{sm:3}},[a("el-select",{attrs:{placeholder:"状态",size:"small",clearable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})}),1)],1),e._v(" "),a("el-col",{attrs:{sm:6}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange",align:"right",size:"small","unlink-panels":"","range-separator":"-","start-placeholder":"发布开始日期","end-placeholder":"发布结束日期","value-format":"yyyy-MM-dd",format:"yyyy年 MM月 dd日"},model:{value:e.listQuery.date_range,callback:function(t){e.$set(e.listQuery,"date_range",t)},expression:"listQuery.date_range"}})],1),e._v(" "),a("el-col",{attrs:{sm:8}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleFilter}},[e._v("\n        搜索\n      ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"success",size:"small"},on:{click:e.handleCreate}},[e._v("\n        添加应用\n      ")])],1)],1),e._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"font-size":"14px"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",size:"mini"}},[a("el-table-column",{attrs:{label:"应用名称",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleViewApp(i)}}},[e._v(e._s(i.name))]),e._v(" "),1==i.is_recommen?a("el-tag",{attrs:{size:"mini",type:"danger"}},[e._v("推荐")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"分类",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.category_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发布时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.created_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-tag",{attrs:{type:1==i.status?"":"danger",size:"small"}},[a("span",[e._v(e._s(1==i.status?"上架中":"已下架"))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"260","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleViewApp(i)}}},[e._v("\n            编辑\n          ")]),e._v(" "),1==i.status?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleChangeStatus(i,2)}}},[e._v("\n            下架\n          ")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleChangeStatus(i,1)}}},[e._v("\n            上架\n          ")]),e._v(" "),1==i.is_recommen?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleChangeRecommen(i,2)}}},[e._v("\n            取消推荐\n          ")]):a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleChangeRecommen(i,1)}}},[e._v("\n            设为推荐\n          ")])]}}])})],1)],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),a("app-info",{attrs:{"app-info":e.appInfo,"info-visible":e.appVisible},on:{"update:infoVisible":function(t){e.appVisible=t},"update:info-visible":function(t){e.appVisible=t},updateList:function(t){return e.getList()}}})],1)},n=[],s=a("b775"),l="/apps";function o(e){return Object(s["a"])({url:l+"/index",method:"get",params:e})}function r(e){return Object(s["a"])({url:l+"/edit",method:"post",data:e})}function c(e){return Object(s["a"])({url:l+"/create",method:"post",data:e})}function u(e){return Object(s["a"])({url:l+"/change-status",method:"post",data:e})}function d(e){return Object(s["a"])({url:l+"/set-recommen",method:"post",data:e})}var p=a("6724"),f=a("333d"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-drawer",{attrs:{title:"应用信息",size:"75%",visible:e.infoVisible,wrapperClosable:!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.infoVisible=t},open:e.handleOpen}},[a("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden",width:"94%",margin:"auto"}},[a("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:e.info}},[a("div",{staticClass:"edit-container"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{prop:"name"}},[a("MDinput",{attrs:{maxlength:100,name:"name",required:""},model:{value:e.info.name,callback:function(t){e.$set(e.info,"name",t)},expression:"info.name"}},[e._v("\n                  应用名称\n                ")])],1),e._v(" "),a("div",{staticStyle:{"font-size":"17px","font-weight":"600","margin-bottom":"10px"}},[e._v("应用描述：")]),e._v(" "),a("el-form-item",{attrs:{prop:"content"}},[e.freshEditor?a("Tinymce",{ref:"editor",attrs:{height:480},model:{value:e.info.content,callback:function(t){e.$set(e.info,"content",t)},expression:"info.content"}}):e._e()],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("应用设置")])]),e._v(" "),a("el-form-item",{attrs:{label:"分类：",prop:"category"}},[a("el-cascader",{staticClass:"full-width",staticStyle:{width:"230px"},attrs:{options:e.cateOptions,placeholder:"请选择分类"},model:{value:e.info.category,callback:function(t){e.$set(e.info,"category",t)},expression:"info.category"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面图：",prop:"thumb"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleUploadSuccess,"before-upload":e.beforeUpload},model:{value:e.info.thumb,callback:function(t){e.$set(e.info,"thumb",t)},expression:"info.thumb"}},[e.info.thumb?a("img",{staticClass:"avatar",attrs:{src:e.info.thumb}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"二维码图：",prop:"code"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleUploadCodeSuccess,"before-upload":e.beforeUpload},model:{value:e.info.code,callback:function(t){e.$set(e.info,"code",t)},expression:"info.code"}},[e.info.code?a("img",{staticClass:"avatar",attrs:{src:e.info.code}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请链接：",prop:"url"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"邀请链接"},model:{value:e.info.url,callback:function(t){e.$set(e.info,"url",t)},expression:"info.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"seo标题：",prop:"seo_title"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo标题"},model:{value:e.info.seo_title,callback:function(t){e.$set(e.info,"seo_title",t)},expression:"info.seo_title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"seo关键词：",prop:"seo_keywords"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo关键词"},model:{value:e.info.seo_keywords,callback:function(t){e.$set(e.info,"seo_keywords",t)},expression:"info.seo_keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"seo描述：",prop:"seo_describe"}},[a("el-input",{staticStyle:{width:"230px"},attrs:{placeholder:"seo描述"},model:{value:e.info.seo_describe,callback:function(t){e.$set(e.info,"seo_describe",t)},expression:"info.seo_describe"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{sm:24}},[a("el-form-item",{attrs:{label:"应用截图：",prop:"attaches"}},[a("el-upload",{attrs:{action:e.uploadUrl,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"file-list":e.attaches,"on-remove":e.handleRemove,"on-success":e.handleAttachSuccess}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,modal:!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:10}},[a("el-col",{staticClass:"button-group",attrs:{sm:24}},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"small",type:"primary",icon:"el-icon-check"},on:{click:e.handleEdit}},[e._v("\n                保存\n              ")])],1)],1)],1)])],1)])],1)},h=[],v=(a("7f7f"),a("1aba")),b=a("8256"),g=a("c405"),w={name:"ProductInfo",components:{MDinput:v["a"],Tinymce:b["a"]},directives:{waves:p["a"]},props:["infoVisible","appInfo"],data:function(){return{info:{id:0,name:"",content:""},uploadUrl:"https://www.5aizhuanqian.com/admin/system/upload",previewVisible:!1,previewImageUrl:"",dialogImageUrl:"",dialogVisible:!1,freshEditor:!1,loading:!1,loaded:!1,cateOptions:[],isOnline:0,attaches:[]}},methods:{handleRemove:function(e,t){this.fileChange(t)},handleAttachSuccess:function(e,t,a){this.fileChange(a)},fileChange:function(e){var t=[];if(e.length>0)for(var a=0;a<e.length;a++)console.log(e[a]),t[a]={name:e[a].name,url:e[a].response?e[a].response.data.preview_url:e[a].url};this.info.attaches=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleUploadSuccess:function(e){this.info.thumb=e.data.preview_url},handleUploadCodeSuccess:function(e){this.info.code=e.data.preview_url},beforeUpload:function(){},handlePreview:function(e){this.previewImageUrl=e,this.previewVisible=!0},getCateOptions:function(){var e=this;Object(g["a"])().then(function(t){console.log(t.data),e.cateOptions=t.data.options})},handleClose:function(){this.freshEditor=!1,this.attaches=[],this.$emit("update:infoVisible",!1)},handleOpen:function(){this.getCateOptions(),this.info=this.appInfo,this.freshEditor=!0,this.attaches=this.info.attaches},handleEdit:function(){var e=this;this.info.id>0?r(this.info).then(function(t){e.$emit("updateList"),e.$notify({title:"成功",message:"保存成功",type:"success",duration:2e3}),e.handleClose()}):c(this.info).then(function(t){e.$emit("updateList"),e.$notify({title:"成功",message:"发布成功",type:"success",duration:2e3}),e.handleClose()})},handleUploaded:function(e){this.info.thumb=e}}},y=w,_=(a("35c9"),a("2877")),k=Object(_["a"])(y,m,h,!1,null,null,null),C=k.exports,x={components:{Pagination:f["a"],AppInfo:C},directives:{waves:p["a"]},data:function(){return{appInfo:{},appVisible:!1,statusOptions:[{name:"上架中",key:1},{name:"已下架",key:2}],list:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,sort:"-id"}}},created:function(){this.getList()},methods:{handleChangeRecommen:function(e,t){var a=this,i=1===t?"设置推荐成功":"取消推荐成功";d({id:e.id,status:t}).then(function(e){a.$notify({title:"成功",message:i,type:"success",duration:2e3}),a.getList()})},getList:function(){var e=this;this.listLoading=!0,o(this.listQuery).then(function(t){e.list=t.data.list,e.total=t.data.total,e.listLoading=!1})},handleFilter:function(){this.listQuery.page=1,this.getList()},handleViewApp:function(e){this.appInfo=e,this.appVisible=!0},handleCreate:function(){this.appInfo={},this.appVisible=!0},handleChangeStatus:function(e,t){var a=this,i=1===t?"应用上架成功":"应用下架成功";u({id:e.id,status:t}).then(function(e){a.$notify({title:"成功",message:i,type:"success",duration:2e3}),a.getList()})}}},S=x,$=Object(_["a"])(S,i,n,!1,null,null,null);t["default"]=$.exports}}]);